<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>skrt.registration module &mdash; Scikit-rt 0.2.3 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="skrt.simulation module" href="skrt.simulation.html" />
    <link rel="prev" title="skrt.patient module" href="skrt.patient.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Scikit-rt
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation and usage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">scikit-rt</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_registration.html">Image registration with scikit-rt and elastix</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code documentation:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="skrt_modules.html">skrt</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="skrt.html">skrt package</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="skrt.html#subpackages">Subpackages</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="skrt.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="skrt.application.html">skrt.application module</a></li>
<li class="toctree-l4"><a class="reference internal" href="skrt.core.html">skrt.core module</a></li>
<li class="toctree-l4"><a class="reference internal" href="skrt.dicom_writer.html">skrt.dicom_writer module</a></li>
<li class="toctree-l4"><a class="reference internal" href="skrt.dose.html">skrt.dose module</a></li>
<li class="toctree-l4"><a class="reference internal" href="skrt.image.html">skrt.image module</a></li>
<li class="toctree-l4"><a class="reference internal" href="skrt.multi.html">skrt.multi module</a></li>
<li class="toctree-l4"><a class="reference internal" href="skrt.patient.html">skrt.patient module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">skrt.registration module</a></li>
<li class="toctree-l4"><a class="reference internal" href="skrt.simulation.html">skrt.simulation module</a></li>
<li class="toctree-l4"><a class="reference internal" href="skrt.structures.html">skrt.structures module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skrt.html#module-skrt">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="voxtox_modules.html">voxtox</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Scikit-rt</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="skrt_modules.html">skrt</a> &raquo;</li>
          <li><a href="skrt.html">skrt package</a> &raquo;</li>
      <li>skrt.registration module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/skrt.registration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-skrt.registration">
<span id="skrt-registration-module"></span><h1>skrt.registration module<a class="headerlink" href="#module-skrt.registration" title="Permalink to this headline"></a></h1>
<p>Tools for performing image registration.</p>
<dl class="py class">
<dt class="sig sig-object py" id="skrt.registration.DeformationField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">DeformationField</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.DeformationField" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class representing a vector field.</p>
<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.DeformationField.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.DeformationField.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Load vector field.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.DeformationField.convert_spacing">
<span class="sig-name descname"><span class="pre">convert_spacing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spacing</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_in_mm</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.DeformationField.convert_spacing" title="Permalink to this definition"></a></dt>
<dd><p>Convert grid spacing in mm or voxels to list containing grid spacing 
in voxels in each dimension.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.DeformationField.get_slice">
<span class="sig-name descname"><span class="pre">get_slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_in_mm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.DeformationField.get_slice" title="Permalink to this definition"></a></dt>
<dd><p>Get voxel positions and displacement vectors on a 2D slice.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.DeformationField.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.DeformationField.load" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.DeformationField.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'x-y'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'quiver'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spacing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom_centre</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_in_mm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.DeformationField.plot" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skrt.registration.Jacobian">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">Jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Jacobian" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skrt.dose.html#skrt.dose.ImageOverlay" title="skrt.dose.ImageOverlay"><code class="xref py py-class docutils literal notranslate"><span class="pre">skrt.dose.ImageOverlay</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Jacobian.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Jacobian.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialise from a medical image source.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>path<span class="classifier">str/array/Nifti1Image, default = “”</span></dt><dd><dl class="simple">
<dt>Source of image data. Can be either:</dt><dd><ol class="loweralpha simple">
<li><p>A string containing the path to a dicom or nifti file;</p></li>
<li><p>A string containing the path to a numpy file containing a
2D or 3D array;</p></li>
<li><p>A 2D or 3D numpy array;</p></li>
<li><p>A nibabel.nifti1.Nifti1Image object;</p></li>
<li><p>An existing Image object to be cloned; in this case, all 
other input args except &lt;title&gt; will be ignored, as these 
will be taken from the existing Image.</p></li>
</ol>
</dd>
</dl>
</dd>
<dt>load<span class="classifier">bool, default=True</span></dt><dd><p>If True, the image data will be immediately loaded. Otherwise, it
can be loaded later with the load() method.</p>
</dd>
<dt>title<span class="classifier">str, default=None</span></dt><dd><p>Title to use when plotting the image. If None and &lt;source&gt; is a
path, a title will be automatically generated from the filename.</p>
</dd>
<dt>affine<span class="classifier">4x4 array, default=None</span></dt><dd><p>Array containing the affine matrix to use if &lt;source&gt; is a numpy
array or path to a numpy file. If not None, this takes precendence
over &lt;voxel_size&gt; and &lt;origin&gt;.</p>
</dd>
<dt>voxel_size<span class="classifier">tuple, default=(1, 1, 1)</span></dt><dd><p>Voxel sizes in mm in order (x, y, z) to use if &lt;source&gt; is a numpy
array or path to a numpy file and &lt;affine&gt; is not provided.</p>
</dd>
<dt>origin<span class="classifier">tuple, default=(0, 0, 0)</span></dt><dd><p>Origin position in mm in order (x, y, z) to use if &lt;source&gt; is a
numpy array or path to a numpy file and &lt;affine&gt; is not provided.</p>
</dd>
<dt>nifti_array<span class="classifier">bool, default=False</span></dt><dd><p>If True and &lt;source&gt; is a numpy array or numpy file, the array
will be treated as a nifti-style array, i.e. (x, y, z) in
(row, column, slice), as opposed to dicom style.</p>
</dd>
<dt>downsample<span class="classifier">int/list, default=None</span></dt><dd><p>Amount by which to downsample the image. Can be a single value for
all axes, or a list containing downsampling amounts in order
(x, y, z).</p>
</dd>
<dt>dtype<span class="classifier">type, default=None</span></dt><dd><p>Type to which loaded data should be cast.</p>
</dd>
<dt>auto_timestamp<span class="classifier">bool default=False</span></dt><dd><p>If true and no valid timestamp is found within the path string,
timestamp generated from current date and time.</p>
</dd>
<dt>default_intensity<span class="classifier">tuple,None default=(-300, 300)</span></dt><dd><p>Default intensity range for image display.  This can
be specified as a two-element tuple, giving minimum and maximum,
or if set to None then the images full intensity range is
used.  If WindowCenter and WindowWidth are defined in a
DICOM source file, these values will be used instead to
define the default intensity range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Jacobian.view">
<span class="sig-name descname"><span class="pre">view</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Jacobian.view" title="Permalink to this definition"></a></dt>
<dd><p>View with BetterViewer, optionally overlaying on image.</p>
<p><strong>Parameters</strong>:</p>
<dl class="simple">
<dt>include_image<span class="classifier">bool, default=False</span></dt><dd><p>If True, this ImageOverlay will be displayed overlaid on its
underlying Image.</p>
</dd>
<dt>kwarg_name<span class="classifier">str, default=None</span></dt><dd><p>Name of kwarg under which to provide self to the call to
self.image.Image.view() if include_image=True. By default,
self will be passed to the “dose” parameter.</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">`</span></a><a href="#id3"><span class="problematic" id="id4">**</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a>kwargs :</dt><dd><p>Keyword args to pass to BetterViewer initialisation.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skrt.registration.Registration">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">Registration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pfiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="skrt.core.html#skrt.core.Data" title="skrt.core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">skrt.core.Data</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">moving_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pfiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">capture_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Load data for an image registration and run the registration if
auto_seg=True.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>path<span class="classifier">str</span></dt><dd><p>Path to directory where the data for this image registration is
stored. Can either be a non-existing directory, in which case
registration will be performed from scratch, or a directory already
containing a fixed and moving image and optionally some registration
steps.</p>
</dd>
<dt>fixed<span class="classifier">Image/str, default=None</span></dt><dd><p>Image object representing the fixed image, or a source from which
an Image object can be initialised. Must be set if the directory
at &lt;path&gt; does not already contain a fixed image file called
“fixed.nii.gz”.</p>
</dd>
<dt>moving<span class="classifier">Image/str, default=None</span></dt><dd><p>Image object representing the fixed image, or a source from which
an Image object can be initialised. Must be set if the directory
at &lt;path&gt; does not already contain a moving image file called
“moving.nii.gz”.</p>
</dd>
<dt>fixed_mask<span class="classifier">Image/str, default=None</span></dt><dd><p>Image object representing a mask to be applied to the fixed image,
or a source from which an Image object can be initialised. If
None and an image file ‘fixed_mask.nii.gz’ exists at &lt;path&gt;
then this will be used.  Setting a mask is optional.</p>
</dd>
<dt>moving_mask<span class="classifier">Image/str, default=None</span></dt><dd><p>Image object representing a mask to be applied to the moving image,
or a source from which an Image object can be initialised. If
None and an image file ‘moving_mask.nii.gz’ exists at &lt;path&gt;
then this will be used.  Setting a mask is optional.</p>
</dd>
<dt>pfiles<span class="classifier">str/list/dict, default=None</span></dt><dd><p>Path(s) to elastix parameter file(s) to be used in each step of the
registration. If a list of more than one path, the parameter files
will be used to apply registrations in series, which the output of
each step being used as an initial transformation for the following
step. If None, the Registration will be initialised with no
registration steps and no registration will be performed. If a dict,
the keys will be taken as names for the registration steps and
the values should be the path to the parameter file for that step;
otherwise, the name of the step will be taken from the parameter
filename.</p>
</dd>
<dt>auto<span class="classifier">bool, default=True</span></dt><dd><p>If True, the registration will be performed immediately for all
steps.</p>
</dd>
<dt>overwrite<span class="classifier">bool, default=False</span></dt><dd><p>If True and &lt;path&gt; already contains files, these will be deleted,
meaning that no prior registration results will be loaded.</p>
</dd>
<dt>tfiles: dict, default={}</dt><dd><p>Dictionary of pre-defined transforms, where a keys is a
registration step and the associated value is the path to
a pre-defined registration transform.  This parameter is
considered only if pfiles is null.</p>
</dd>
<dt>capture_output<span class="classifier">bool, default=False</span></dt><dd><p>If True, capture to stdout messages from performing
registration and transformation.  This suppresses
informational messages to screen, but doesn’t suppress error
messages.</p>
</dd>
<dt>log_level: str/int/None, default=None</dt><dd><p>Severity level for event logging.  If the value is None,
log_level is set to the value of skrt.core.Defaults().log_level.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.add_default_pfile">
<span class="sig-name descname"><span class="pre">add_default_pfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.add_default_pfile" title="Permalink to this definition"></a></dt>
<dd><p>Add a default parameter file. For options, run
Registration.list_default_pfiles(). You can also inspect the contents
of a default parameter file by running get_default_params(name).</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>filename<span class="classifier">str</span></dt><dd><p>Name of the default parameter file to add (with or without
the .txt extension).</p>
</dd>
<dt>params<span class="classifier">dict, default=None</span></dt><dd><p>Dictionary of parameter names and replacement values with which
the input parameter file will be modified.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.add_pfile">
<span class="sig-name descname"><span class="pre">add_pfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.add_pfile" title="Permalink to this definition"></a></dt>
<dd><p>Add a single parameter file to the list of registration steps.
This parameter file can optionally be modified by providing a dict
of parameter names and new values in &lt;params&gt;.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>pfile<span class="classifier">str/dict</span></dt><dd><p>Path to the elastix parameter file to copy into the registration
directory. Can also be a dict containing parameters and values,
which will be used to create a parameter file from scratch. In this
case, the &lt;name&gt; argument must also be provided.</p>
</dd>
<dt>name<span class="classifier">str, default=None</span></dt><dd><p>Name for this step of the registration. If None, a name will
be taken from the parameter file name.</p>
</dd>
<dt>params<span class="classifier">dict, default=None</span></dt><dd><p>Dictionary of parameter names and replacement values with which
the input parameter file will be modified.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.add_pfiles">
<span class="sig-name descname"><span class="pre">add_pfiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pfiles</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.add_pfiles" title="Permalink to this definition"></a></dt>
<dd><p>Add multiple parameter files to the list of registration steps,
then write list of registration steps to a file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.adjust_pfile">
<span class="sig-name descname"><span class="pre">adjust_pfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.adjust_pfile" title="Permalink to this definition"></a></dt>
<dd><p>Adjust parameters in an input parameter file for a given step.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>step<span class="classifier">str/int</span></dt><dd><p>Name or number of step for which the parameter file should be 
adjusted.</p>
</dd>
<dt>params<span class="classifier">dict</span></dt><dd><p>Dict of parameter names and desired parameter values. Any parameters
matching those in the existing file will be overwritten with the
new values. Any parameters not in the existing file will be added.
Parameters in the existing file but not in &lt;params&gt; will remain
unchanged.</p>
</dd>
<dt>reset<span class="classifier">bool, default=True</span></dt><dd><p>If True, this will remove existing registration results.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.clear" title="Permalink to this definition"></a></dt>
<dd><p>Remove all registration steps and their output directories.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.ensure_registered">
<span class="sig-name descname"><span class="pre">ensure_registered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.ensure_registered" title="Permalink to this definition"></a></dt>
<dd><p>If a step has not already been registered, perform registration
for this step and any preceding steps. Return True if registration
had already been performed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_ELASTIX_cmd">
<span class="sig-name descname"><span class="pre">get_ELASTIX_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_previous_tfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_ELASTIX_cmd" title="Permalink to this definition"></a></dt>
<dd><p>Get elastix registration command for a given step.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_default_params">
<span class="sig-name descname"><span class="pre">get_default_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_default_params" title="Permalink to this definition"></a></dt>
<dd><p>Get the contents of a default parameter file as a dict. Note that this
does not affect the current Registration object and is only for
informative purposes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_deformation_field">
<span class="sig-name descname"><span class="pre">get_deformation_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_deformation_field" title="Permalink to this definition"></a></dt>
<dd><p>Generate deformation field using transformix for a given 
registration step.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_input_parameters">
<span class="sig-name descname"><span class="pre">get_input_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_input_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Get dict of input parameters for a given step.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_jacobian">
<span class="sig-name descname"><span class="pre">get_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_jacobian" title="Permalink to this definition"></a></dt>
<dd><p>Generate Jacobian determinant using transformix for a given 
registration step (or return existing Jacobian object, unless 
force=True).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_step_name">
<span class="sig-name descname"><span class="pre">get_step_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_step_name" title="Permalink to this definition"></a></dt>
<dd><p>Convert &lt;step&gt; to a string containing a step name. If &lt;step&gt; is
already a string, check it’s a valid step and return it; otherwise
if &lt;step&gt; is an integer, return the corresponding step name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_step_number">
<span class="sig-name descname"><span class="pre">get_step_number</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_step_number" title="Permalink to this definition"></a></dt>
<dd><p>Convert &lt;step&gt; to an int containing the number of a given step.
If &lt;step&gt; is an int, check it corresponds to a step number, ensure it 
is positive, and return it. Otherwise if it’s a string, return the 
index of that step name in self.steps.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_transform_parameters">
<span class="sig-name descname"><span class="pre">get_transform_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_transform_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Get dict of output transform parameters for a given step.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.get_transformed_image">
<span class="sig-name descname"><span class="pre">get_transformed_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.get_transformed_image" title="Permalink to this definition"></a></dt>
<dd><p>Get the transformed moving image for a given step, by default the
final step. If force=True, the transform will be applied with
transformix even if there is already a resultant image in the
output directory for that step.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.is_registered">
<span class="sig-name descname"><span class="pre">is_registered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.is_registered" title="Permalink to this definition"></a></dt>
<dd><p>Check whether a registration step has already been performed (i.e. 
has a valid output transform file).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.list_default_pfiles">
<span class="sig-name descname"><span class="pre">list_default_pfiles</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.list_default_pfiles" title="Permalink to this definition"></a></dt>
<dd><p>List the available default parameter files. Note that this
does not affect the current Registration object and is only for
informative purposes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.load_existing_input_images">
<span class="sig-name descname"><span class="pre">load_existing_input_images</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.load_existing_input_images" title="Permalink to this definition"></a></dt>
<dd><p>Attempt to load images from fixed.nii.gz and moving.nii.gz from
inside self.path. Print a warning if not found.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.load_pfiles">
<span class="sig-name descname"><span class="pre">load_pfiles</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.load_pfiles" title="Permalink to this definition"></a></dt>
<dd><p>Attempt to load registration steps from a registration step
file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.make_tmp_dir">
<span class="sig-name descname"><span class="pre">make_tmp_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.make_tmp_dir" title="Permalink to this definition"></a></dt>
<dd><p>Create temporary directory.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.manually_adjust_translation">
<span class="sig-name descname"><span class="pre">manually_adjust_translation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reapply_transformation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.manually_adjust_translation" title="Permalink to this definition"></a></dt>
<dd><p>Open BetterViewer and manually adjust the translation between the
fixed image and the result of a registration. If the “write translation”
button is clicked, the manual translation will be added to the
translation in the output transform file.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>step<span class="classifier">int/str, default=None</span></dt><dd><p>Name, number, or list of the step which should have its translation
modified. This must be provided if the registration has more than
one step. If the tfile for the chosen step does not contain a
translation, the function will immediately return None.</p>
</dd>
<dt>reapply_transformation<span class="classifier">bool, default=True</span></dt><dd><p>If True, upon saving a translation, transformix will be run to
reproduce the transformed moving image according to the new
translation parameters.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.print_log">
<span class="sig-name descname"><span class="pre">print_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.print_log" title="Permalink to this definition"></a></dt>
<dd><p>Print elastix output log for a given step (by default, the 
last step).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.register">
<span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_previous_tfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.register" title="Permalink to this definition"></a></dt>
<dd><p>Run a registration. By default the registration will be run for
all steps in self.steps, but can optionally be run for just one step
by setting &lt;step&gt; to a step name or number. Note that if
use_previous_tfile=True, any prior steps that have not yet been
run will be run.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>step<span class="classifier">int/str/list, default=None</span></dt><dd><p>Name, number, or list of the step(s) for which the registration
should be performed. By default, registration will be performed
for all steps in series, using the previous steps’s output
transform as input for the next. Available steps are listed in
self.steps.</p>
</dd>
<dt>force<span class="classifier">bool, default=None</span></dt><dd><p>If False and a registration has already been performed for the
given step(s), the registration will not be re-run.</p>
</dd>
<dt>use_previous_tfile<span class="classifier">bool, default=True</span></dt><dd><p>If True, each step will use the transform file from the previous
step as an initial transform.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.register_step">
<span class="sig-name descname"><span class="pre">register_step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_previous_tfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.register_step" title="Permalink to this definition"></a></dt>
<dd><p>Run a single registration step. Note that if use_previous_tfile=True,
any prior steps that have not yet been run will be run.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>step<span class="classifier">int/str/list, default=None</span></dt><dd><p>Name or number of the step for which the registration should be
performed. Available steps are listed in self.steps.</p>
</dd>
<dt>force<span class="classifier">bool, default=None</span></dt><dd><p>If False and a registration has already been performed for the
given step, the registration will not be re-run. Note that setting
force=True will only force rerunning of the chosen step, not of
any preceding steps needed for the input transform file. To enforce
rerunning of multiple steps, call self.register(step, force=True)
where &lt;steps&gt; is a list of steps to run.</p>
</dd>
<dt>use_previous_tfile<span class="classifier">bool, default=True</span></dt><dd><p>If True, this step will use the transform file from the previous
step as an initial transform, unless it is the first step. Note
that this will cause any prior steps that have not yet been run
to be run.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.rm_tmp_dir">
<span class="sig-name descname"><span class="pre">rm_tmp_dir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.rm_tmp_dir" title="Permalink to this definition"></a></dt>
<dd><p>Delete temporary directory and its contents.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.run_transformix_on_all">
<span class="sig-name descname"><span class="pre">run_transformix_on_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">is_jac</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outdir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.run_transformix_on_all" title="Permalink to this definition"></a></dt>
<dd><p>Run transformix with either <cite>-jac all</cite> or <cite>-def all</cite> to create a
Jacobian determinant or deformation field file, and return either
a Jacobian or DeformationField object initialised from the output file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.set_fixed_image">
<span class="sig-name descname"><span class="pre">set_fixed_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.set_fixed_image" title="Permalink to this definition"></a></dt>
<dd><p>Assign a fixed image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.set_fixed_mask">
<span class="sig-name descname"><span class="pre">set_fixed_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.set_fixed_mask" title="Permalink to this definition"></a></dt>
<dd><p>Assign a fixed-image mask.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.set_image">
<span class="sig-name descname"><span class="pre">set_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">category</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.set_image" title="Permalink to this definition"></a></dt>
<dd><p>Assign a fixed or moving image.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>im<span class="classifier">Image/str</span></dt><dd><p>The Image object to set, or a path that can be used to intialise
an Image object.</p>
</dd>
<dt>category<span class="classifier">str</span></dt><dd><p>Category of image: “fixed”, “moving”, “fixed_mask”, “moving_mask”.</p>
</dd>
<dt>force<span class="classifier">bool, default=True</span></dt><dd><p>If True, the image file within self.path will be overwritten by
this image even if it already exists.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.set_moving_image">
<span class="sig-name descname"><span class="pre">set_moving_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.set_moving_image" title="Permalink to this definition"></a></dt>
<dd><p>Assign a moving image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.set_moving_mask">
<span class="sig-name descname"><span class="pre">set_moving_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.set_moving_mask" title="Permalink to this definition"></a></dt>
<dd><p>Assign a moving-image mask.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">to_transform</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.transform" title="Permalink to this definition"></a></dt>
<dd><p>Call one of the transform functions, depending on the type of
<cite>to_transform</cite>. Functions called depending on type are:</p>
<dl class="simple">
<dt>Image:</dt><dd><p>transform_image(to_transform, <a href="#id7"><span class="problematic" id="id8">`</span></a><a href="#id9"><span class="problematic" id="id10">**</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>kwargs)</p>
</dd>
<dt>str:</dt><dd><p>transform_data(to_transform, <a href="#id13"><span class="problematic" id="id14">`</span></a><a href="#id15"><span class="problematic" id="id16">**</span></a><a href="#id17"><span class="problematic" id="id18">`</span></a>kwargs)</p>
</dd>
<dt>StructureSet:</dt><dd><p>transform_structure_set(to_transform, <a href="#id19"><span class="problematic" id="id20">`</span></a><a href="#id21"><span class="problematic" id="id22">**</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a>kwargs)</p>
</dd>
<dt>ROI:</dt><dd><p>transform_roi(to_transform, <a href="#id25"><span class="problematic" id="id26">`</span></a><a href="#id27"><span class="problematic" id="id28">**</span></a><a href="#id29"><span class="problematic" id="id30">`</span></a>kwargs)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.transform_data">
<span class="sig-name descname"><span class="pre">transform_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.transform_data" title="Permalink to this definition"></a></dt>
<dd><p>Transform a nifti file or point cloud at a given path
for a given step, ensuring that the step has been run. Return
the path to the transformed file inside self._tmp_dir.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.transform_image">
<span class="sig-name descname"><span class="pre">transform_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rois</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.transform_image" title="Permalink to this definition"></a></dt>
<dd><p>Transform an image using the output transform from a given
registration step (by default, the final step). If the registration
step has not yet been performed, the step and all preceding steps
will be run. Either return the transformed image or write it to
a file.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>im<span class="classifier">Image/str</span></dt><dd><p>Image to be transformed. Can be either an Image object or a
path that can be used to initialise an Image object.</p>
</dd>
<dt>step<span class="classifier">int/str, default=-1</span></dt><dd><p>Name or number of step for which to apply the transform; by
default, the final step will be used.</p>
</dd>
<dt>outfile<span class="classifier">str, default=None</span></dt><dd><p>If None, the transformed Image object will be returned; otherwise,
it will be written to the path specified in &lt;outfile&gt;.</p>
</dd>
<dt>params<span class="classifier">dict, default=None</span></dt><dd><p>Optional list of parameters to temporarily overwrite in the
transform file before applying the transform. Should be a dict,
where keys are parameter names and desired values are values.
Note that strings in the parameter file, need to include quotes,
so you will need to use double quotes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.transform_moving_image">
<span class="sig-name descname"><span class="pre">transform_moving_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.transform_moving_image" title="Permalink to this definition"></a></dt>
<dd><p>Transform the moving image using the output of a registration step
and set it to self.transformed_images[step].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.transform_roi">
<span class="sig-name descname"><span class="pre">transform_roi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.transform_roi" title="Permalink to this definition"></a></dt>
<dd><p>Transform a single ROI using the output transform from a given
registration step (by default, the final step). If the registration
step has not yet been performed, the step and all preceding steps
will be run. Either return the transformed ROI or write it to a file.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>roi<span class="classifier">ROI/str</span></dt><dd><p>ROI to be transformed. Can be either an ROI object or a
path that can be used to initialise an ROI object.</p>
</dd>
<dt>step<span class="classifier">int/str, default=-1</span></dt><dd><p>Name or number of step for which to apply the transform; by
default, the final step will be used.</p>
</dd>
<dt>outfile<span class="classifier">str, default=None</span></dt><dd><p>If None, the transformed ROI object will be returned; otherwise,
it will be written to the path specified in &lt;outfile&gt;.</p>
</dd>
<dt>params<span class="classifier">dict, default=None</span></dt><dd><p>Optional list of parameters to temporarily overwrite in the
transform file before applying the transform. Should be a dict,
where keys are parameter names and desired values are values.
Note that strings in the parameter file, need to include quotes,
so you will need to use double quotes.
By default, “ResampleInterpolator” will be set to
“FinalNearestNeighborInterpolator”.</p>
</dd>
<dt>transform_points<span class="classifier">bool, default=False</span></dt><dd><p>If False, the transform is applied to pull the ROI mask
from the reference frame of the moving image to the reference
frame of the fixed image.  If True, the transform is applied
to push ROI contour points from the reference frame of the
fixed image to the reference frame of the moving image.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.transform_structure_set">
<span class="sig-name descname"><span class="pre">transform_structure_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">structure_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.transform_structure_set" title="Permalink to this definition"></a></dt>
<dd><p>Transform a structure set using the output transform from a given
registration step (by default, the final step). If the registration
step has not yet been performed, the step and all preceding steps
will be run. Either return the transformed ROI or write it to a file.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>structure_set<span class="classifier">StructureSet/str</span></dt><dd><p>StructureSet to be transformed. Can be either a StructureSet
object or a path that can be used to initialise a StructureSet.</p>
</dd>
<dt>step<span class="classifier">int/str, default=-1</span></dt><dd><p>Name or number of step for which to apply the transform; by
default, the final step will be used.</p>
</dd>
<dt>outfile<span class="classifier">str, default=None</span></dt><dd><p>If None, the transformed StructureSet object will be returned;
otherwise, it will be written to the path specified in &lt;outfile&gt;.</p>
</dd>
<dt>params<span class="classifier">dict, default=None</span></dt><dd><p>Optional list of parameters to temporarily overwrite in the
transform file before applying the transform. Should be a dict,
where keys are parameter names and desired values are values.
Note that strings in the parameter file, need to include quotes,
so you will need to use double quotes.
By default, “ResampleInterpolator” will be set to
“FinalNearestNeighborInterpolator”.</p>
</dd>
<dt>transform_points<span class="classifier">bool, default=False</span></dt><dd><p>If False, the transform is applied to pull ROI masks
from the reference frame of the moving image to the reference
frame of the fixed image.  If True, the transform is applied
to push ROI contour points from the reference frame of the
fixed image to the reference frame of the moving image.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.view_init">
<span class="sig-name descname"><span class="pre">view_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.view_init" title="Permalink to this definition"></a></dt>
<dd><p>Interactively view initial fixed and moving images.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.view_result">
<span class="sig-name descname"><span class="pre">view_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compare_with_fixed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.view_result" title="Permalink to this definition"></a></dt>
<dd><p>Interactively view transformed image, optionally side-by-side
with fixed image.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>step<span class="classifier">int/str, default=-1</span></dt><dd><p>Name or number of step for which to view the result. By default,
the result of the final step will be shown.</p>
</dd>
<dt>compare_with_fixed<span class="classifier">bool, default=True</span></dt><dd><p>If True, the result will be displayed in comparison with the
fixed image.</p>
</dd>
<dt><a href="#id31"><span class="problematic" id="id32">`</span></a><a href="#id33"><span class="problematic" id="id34">**</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>kwargs :</dt><dd><p>Optional keyword arguments to pass to BetterViewer.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skrt.registration.Registration.write_steps">
<span class="sig-name descname"><span class="pre">write_steps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.Registration.write_steps" title="Permalink to this definition"></a></dt>
<dd><p>Write list of registration steps to a file at
self.path/registration_steps.txt.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skrt.registration.adjust_parameters">
<span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">adjust_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.adjust_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Open an elastix parameter file (works for both input parameter and
output transform files), adjust its parameters, and save it to a new
file.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>file<span class="classifier">str</span></dt><dd><p>Path to an elastix parameter file.</p>
</dd>
<dt>outfile<span class="classifier">str</span></dt><dd><p>Path to output file.</p>
</dd>
<dt>params<span class="classifier">dict</span></dt><dd><p>Dictionary of parameter names and new values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skrt.registration.get_default_pfiles">
<span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">get_default_pfiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">basename_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.get_default_pfiles" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skrt.registration.prepend_path">
<span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">prepend_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_must_exist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.prepend_path" title="Permalink to this definition"></a></dt>
<dd><p>Prepend path to environment variable.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt>variable<span class="classifier">str</span></dt><dd><p>Environment variable to which path is to be prepended.</p>
</dd>
<dt>path<span class="classifier">str</span></dt><dd><p>Path to be prepended.</p>
</dd>
<dt>path_must_exist<span class="classifier">bool, default=True</span></dt><dd><p>If True, only append path if it exists.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skrt.registration.read_parameters">
<span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">read_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.read_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Get dictionary of parameters from an elastix parameter file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skrt.registration.set_elastix_dir">
<span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">set_elastix_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.set_elastix_dir" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skrt.registration.shift_translation_parameters">
<span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">shift_translation_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.shift_translation_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Add to the translation parameters in a file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skrt.registration.write_parameters">
<span class="sig-prename descclassname"><span class="pre">skrt.registration.</span></span><span class="sig-name descname"><span class="pre">write_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skrt.registration.write_parameters" title="Permalink to this definition"></a></dt>
<dd><p>Write dictionary of parameters to an elastix parameter file.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="skrt.patient.html" class="btn btn-neutral float-left" title="skrt.patient module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="skrt.simulation.html" class="btn btn-neutral float-right" title="skrt.simulation module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>